<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Benchmarks - djfedos-search</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/color-brewer.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">djfedos-search</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">djfedos-search</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Benchmarks</a>
                            </li>
                            <li class="navitem">
                                <a href="../how_does_it_wrok/" class="nav-link">How does it wrok</a>
                            </li>
                            <li class="navitem">
                                <a href="../how_to_run_my_own_demo/" class="nav-link">How to run my own demo</a>
                            </li>
                            <li class="navitem">
                                <a href="../how_to_use/" class="nav-link">How to use</a>
                            </li>
                            <li class="navitem">
                                <a href="../tests/" class="nav-link">Tests</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href=".." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../how_does_it_wrok/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="2"><a href="#benchmarks" class="nav-link">Benchmarks</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h2 id="benchmarks">Benchmarks</h2>
<p>To benchmark performance of the library in different scenarios, use <code>test_benchmarks.py</code>
with <code>pytest</code> module. There are several functions for benchmarking that support semi-automated
workflow.</p>
<h3 id="test_benchmark_load_db">test_benchmark_load_db()</h3>
<p>measures the performance of loading tokens to the database
from the text file. It has the following parameters:</p>
<ul>
<li><code>num_lines:int</code>: number of lines (tokens) in a text file that's generated on every benchmark
cycle.</li>
<li><code>max_length:int</code>: length of a single token in characters. all the generated tokens have the same
length, that is also a maximum length, in order to reproduce the worst case scenario.</li>
<li><code>cycles:int</code>: number of benchmark cycles to average out any fluctuations of its results.</li>
<li><code>result_path:str</code>: path to the file with benchmark results. It's recommended to save results
in .csv file.</li>
</ul>
<h3 id="test_benchmark_get_suggestions_limits">test_benchmark_get_suggestions_limits()</h3>
<p>measures the performance of getting tokens from
the database with a given limit on maximum amount of output tokens. The prefix is set to
an empty string to maximize possible token output. It has the following parameters:</p>
<ul>
<li><code>limit:int</code>: the main parameter of the test, it sets a maximum amount of tokens that
the engine will output.</li>
<li><code>num_lines:int</code>: number of lines (tokens) in a text file that's generated on every benchmark
cycle.</li>
<li><code>max_length:int</code>: length of a single token in characters. all the generated tokens have the same
length, that is also a maximum length, in order to reproduce the worst case scenario.</li>
<li><code>cycles:int</code>: number of benchmark cycles to average out any fluctuations of its results.</li>
<li><code>result_path:str</code>: path to the file with benchmark results. It's recommended to save results
in .csv file.</li>
<li><code>prefix_length=0</code> in this case is used only to output the results into a .csv file.
The prefix length in this test is hardcoded to be zero anyway, so it's recommended not to
edit this parameter and leave it as it is.</li>
</ul>
<h3 id="test_benchmark_get_suggestions_prefix">test_benchmark_get_suggestions_prefix()</h3>
<p>this benchmark emulates a pretty unrealistic worst case scenario. It generates a token
base with strings of a single character 'a'.
Then it measures the time that it takes to fetch all the suitable tokens with prefixes
consisting of the same character 'a'. It cycles through prefix length values from zero 
to (<code>prefix_length</code> - 1). </p>
<ul>
<li><code>prefix_length:int</code>: maximum prefix length.</li>
<li><code>num_lines:int</code>: number of lines (tokens) in a text file that's generated on every benchmark
cycle.</li>
<li><code>limit:int</code>: maximum amount of tokens that the engine will output. </li>
<li><code>cycles:int</code>: number of benchmark cycles to average out any fluctuations of its results.</li>
<li><code>result_path:str</code>: path to the file with benchmark results. It's recommended to save results
in .csv file.</li>
</ul>
<h3 id="test_plot_benchmarks">test_plot_benchmarks()</h3>
<p>This method allows plotting benchmark results as a graph from the .csv file.
It's useful when you make several benchmark runs with different parameters.</p>
<ul>
<li><code>result_path:str</code>: path to th .csv file with benchmark results</li>
<li><code>columns:List(str)</code>: columns with data to plot in ['x','y'] form, where 'x' is the name
of horizontal axis data and 'y' is the name of vertical axis data.</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
